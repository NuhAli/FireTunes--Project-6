(this.webpackJsonpfiretunes=this.webpackJsonpfiretunes||[]).push([[0],{29:function(e,t,a){e.exports=a(50)},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n,s=a(1),r=a.n(s),i=a(25),l=a.n(i),c=a(12),o=a(19),u=a(8),m=a(9),h=a(3),d=a(11),p=a(10),f=a(2),y=(a(34),a(27)),k=a(26),v=function(e){return r.a.createElement("header",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"menu-toggle"},r.a.createElement(k.a,{className:"menu-icon",onClick:e.onclick})),r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"FireTunes")),r.a.createElement("div",{className:"title-icon"},r.a.createElement(y.a,{className:"react-icons"}))),r.a.createElement("div",{className:"border-bottom"}))},g=(a(35),a(36),a(15)),b=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;window.addEventListener("load",(function(){setTimeout((function(){e.props.getPlaylists()}),500)}));var t=this.props.playlists.map((function(t){return r.a.createElement(c.b,{to:"/".concat(t.name),key:t.id},r.a.createElement("div",{className:"list-item",onClick:function(){e.props.clear(),setTimeout((function(){e.props.getPlaylistInfo(t.id)}),500),e.props.handleMenuToggle()}},r.a.createElement("div",{className:"hover-effect"}),r.a.createElement("li",null,t.name)))}));return r.a.createElement("div",{className:"playlist"},r.a.createElement("h4",{className:"section-title"},"Your Playlists"),r.a.createElement("ul",{className:"playlist-list"},t),r.a.createElement("div",{className:"button-area"},r.a.createElement(c.b,{to:"/newplaylist"},r.a.createElement("button",{className:"cta",onClick:this.props.handleMenuToggle},"New playlist ",r.a.createElement(g.a,null)))))}}]),a}(s.Component),E=function(e){return r.a.createElement("nav",{className:e.menuToggle?"active":"unactive"},r.a.createElement(b,{menuToggle:e.menuToggle,playlists:e.playlists,getPlaylists:e.getPlaylists,getPlaylistInfo:e.getPlaylistInfo,clear:e.clear,handleMenuToggle:e.handleMenuToggle}))},T=(a(42),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;window.addEventListener("load",(function(){setTimeout((function(){e.props.getPlaylists()}),500)}));var t=this.props.playlists.map((function(t){return r.a.createElement(c.b,{to:"/".concat(t.name),key:"".concat(Math.random())},r.a.createElement("div",{className:"list-item",onClick:function(){e.props.clear(),setTimeout((function(){e.props.getPlaylistInfo(t.id)}),500)}},r.a.createElement("div",{className:"hover-effect"}),r.a.createElement("li",null,t.name)))}));return r.a.createElement("div",{className:"playlist"},r.a.createElement("h4",{className:"section-title"},"Your Playlists"),r.a.createElement("ul",{className:"playlist-list"},t),r.a.createElement("div",{className:"button-area"},r.a.createElement(c.b,{to:"/newplaylist"},r.a.createElement("button",{className:"cta"},"New playlist ",r.a.createElement(g.a,null)))))}}]),a}(s.Component)),N=(a(43),a(18)),O=(a(44),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={selected:!1},n.addNewTrack=n.addNewTrack.bind(Object(h.a)(n)),n.removeNewTrack=n.removeNewTrack.bind(Object(h.a)(n)),n.renderIcon=n.renderIcon.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"addNewTrack",value:function(){this.setState({selected:!0}),this.props.addTrack(this.props.track)}},{key:"removeNewTrack",value:function(){this.props.removeTrack(this.props.track)}},{key:"renderIcon",value:function(){return this.props.isRemoval&&!this.props.existingPlaylist?r.a.createElement("td",{className:"status"},r.a.createElement(N.b,{className:"icon",onClick:this.removeNewTrack})):this.props.isRemoval||this.props.existingPlaylist?r.a.createElement("td",{className:"status",style:{display:"none"}},r.a.createElement(N.a,{className:"icon",onClick:this.addNewTrack})):r.a.createElement("td",{className:"status"},r.a.createElement(N.a,{className:"icon",onClick:this.addNewTrack}))}},{key:"render",value:function(){return r.a.createElement("tr",{className:"search-item"},r.a.createElement("td",null,this.props.track.title),r.a.createElement("td",null,this.props.track.artist),r.a.createElement("td",null,this.props.track.album),r.a.createElement("td",null,this.props.track.duration),this.renderIcon())}}]),a}(s.Component)),P=function(e){var t=e.tracks.map((function(t){return r.a.createElement(O,{track:t,key:Math.random(),addTrack:e.addTrack,removeTrack:e.removeTrack,isRemoval:e.isRemoval,existingPlaylist:e.existingPlaylist})}));return r.a.createElement("div",{className:"results-table-area"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Artist"),r.a.createElement("th",null,"Album"),r.a.createElement("th",null,"Duration"),e.existingPlaylist?r.a.createElement("th",{className:"status",style:{display:"none"}},"Status"):r.a.createElement("th",{className:"status"},"Status"))),r.a.createElement("tbody",null,t)))},j=(a(45),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={searchQuery:""},n.searchTrack=n.searchTrack.bind(Object(h.a)(n)),n.handleSearchQuery=n.handleSearchQuery.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"searchTrack",value:function(){this.props.search(this.state.searchQuery)}},{key:"handleSearchQuery",value:function(e){this.setState({searchQuery:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"search-results-area"},r.a.createElement("div",{className:"search-bar"},r.a.createElement("input",{type:"text",name:"searchQuery",placeholder:"Search for a song ....",onChange:this.handleSearchQuery}),r.a.createElement("button",{type:"button",className:"cta",onClick:this.searchTrack},r.a.createElement(g.b,null))),r.a.createElement(P,{tracks:this.props.tracks,addTrack:this.props.addTrack,isRemoval:!1,existingPlaylist:!1}))}}]),a}(s.Component)),w=(a(46),function(e){return r.a.createElement("div",{className:"newplay-list"},r.a.createElement("input",{id:"naming-input",type:"text",name:"playListName",placeholder:"Enter a new playlist name....",onChange:e.handleNameChange}),r.a.createElement(P,{tracks:e.playlistTracks,removeTrack:e.removeTrack,isRemoval:!0}),r.a.createElement("button",{className:"cta",onClick:function(){e.savePlaylist(e.playlist,e.listOfUris)}},"Save to spotify"))}),S=(a(47),function(e){return r.a.createElement("div",{className:"existing-play-list"},r.a.createElement(P,{tracks:e.info,removeTrack:e.removeTrack,isRemoval:!0,existingPlaylist:!0}))}),C=a(13),I=a.n(C),x=a(17),A=function(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a},M={getAccessToken:function(){if(n)return n;var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);if(e&&t){n=e[1];var a=Number(t[1]);window.setTimeout((function(){return n=""}),1e5*a),window.history.pushState("Access Token",null,"/")}else{var s="https://accounts.spotify.com/authorize?client_id=".concat("b9ae6b5166654ed9a3cbb0484fadedf0","&response_type=token&scope=playlist-modify-public%20playlist-read-private%20playlist-read-collaborative&redirect_uri=").concat("https://nuhali.github.io/FireTunes--Project-6/");window.location=s}},search:function(e){return Object(x.a)(I.a.mark((function t(){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=M.getAccessToken(),t.abrupt("return",fetch("https://api.spotify.com/v1/search?q=".concat(e,"&type=track&market=US&limit=15"),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?e.tracks.items.map((function(e){return{title:e.name,artist:e.artists[0].name,album:e.album.name,duration:A(e.duration_ms),id:e.id,uri:e.uri}})):[]})));case 2:case"end":return t.stop()}}),t)})))()},savePlaylist:function(e,t){return Object(x.a)(I.a.mark((function a(){var n,s,r;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=M.getAccessToken(),s={Authorization:"Bearer ".concat(n)},e&&t.length||alert("Please make sure to enter a name and at least one track from the search results."),a.abrupt("return",fetch("https://api.spotify.com/v1/me",{headers:s}).then((function(e){return e.json()})).then((function(a){return r=a.id,fetch("https://api.spotify.com/v1/users/".concat(r,"/playlists"),{headers:s,method:"POST",body:JSON.stringify({name:e,description:"Playlist created by Fire Tunes using the Spotify API",public:!0})}).then((function(e){return e.json()})).then((function(e){var a=e.id;return fetch("https://api.spotify.com/v1/playlists/".concat(a,"/tracks"),{headers:s,method:"POST",body:JSON.stringify({uris:t})})}))})));case 4:case"end":return a.stop()}}),a)})))()},getPlaylists:function(){return Object(x.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.getAccessToken(),a={Authorization:"Bearer ".concat(t)},e.abrupt("return",fetch("https://api.spotify.com/v1/me/playlists",{headers:a}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed")})).then((function(e){return e.items.map((function(e){return{name:e.name,id:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))()},getPlaylistInfo:function(e){return Object(x.a)(I.a.mark((function t(){var a,n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=M.getAccessToken(),n={Authorization:"Bearer ".concat(a)},t.abrupt("return",fetch("https://api.spotify.com/v1/playlists/".concat(e),{headers:n}).then((function(e){if(e.ok)return e.json();alert("Failed here")})).then((function(t){return t.tracks?t.tracks.items.map((function(t){return{id:e,title:t.track.name,artist:t.track.album.artists[0].name,album:t.track.album.name,duration:A(t.track.duration_ms),uri:t.track.uri}})):void 0})));case 3:case"end":return t.stop()}}),t)})))()}},Q=M,U=(a(49),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={playlists:[],tracks:[],existingPlaylistName:[],existingPlaylistInfo:[],playlistName:"",playlistTracks:[],listOfUris:[],menuToggle:!1},n.handleMenuToggle=n.handleMenuToggle.bind(Object(h.a)(n)),n.handleNameChange=n.handleNameChange.bind(Object(h.a)(n)),n.handleSearchQuery=n.handleSearchQuery.bind(Object(h.a)(n)),n.addTrack=n.addTrack.bind(Object(h.a)(n)),n.removeTrack=n.removeTrack.bind(Object(h.a)(n)),n.searchTrack=n.searchTrack.bind(Object(h.a)(n)),n.savePlaylist=n.savePlaylist.bind(Object(h.a)(n)),n.getPlaylists=n.getPlaylists.bind(Object(h.a)(n)),n.getPlaylistInfo=n.getPlaylistInfo.bind(Object(h.a)(n)),n.clearCurrent=n.clearCurrent.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"handleNameChange",value:function(e){this.setState({playlistName:e.target.value})}},{key:"handleSearchQuery",value:function(e){this.setState({searchQuery:e.target.value})}},{key:"handleMenuToggle",value:function(){this.setState({menuToggle:!this.state.menuToggle})}},{key:"addTrack",value:function(e){var t=this.state.tracks,a=this.state.listOfUris,n=t.find((function(t){return t.id===e.id})),s=a.push(n.uri),r=t.filter((function(t){return t.id!==e.id})),i=[].concat(Object(o.a)(this.state.playlistTracks),[n]);this.setState({tracks:r,playlistTracks:i,uriList:s})}},{key:"removeTrack",value:function(e){var t,a=this.state.playlistTracks.filter((function(t){return t.id!==e.id})),n=this.state.listOfUris.filter((function(t){return t!==e.uri}));t=this.state.tracks.length>0?[].concat(Object(o.a)(this.state.tracks),[e]):Object(o.a)(this.state.tracks),this.setState({tracks:t,playlistTracks:a,listOfUris:n})}},{key:"searchTrack",value:function(e){var t=this;Q.search(e).then((function(e){t.setState({tracks:e})}))}},{key:"savePlaylist",value:function(){var e=this,t=this.state.listOfUris;Q.savePlaylist(this.state.playlistName,t).then((function(){alert('Your playlist "'.concat(e.state.playlistName,'" has been saved to spotify.')),e.setState({playlistName:"",playlistTracks:[],listOfUris:[]})})),setInterval((function(){window.location.reload()}),1e3)}},{key:"getPlaylists",value:function(){var e=this;Q.getPlaylists().then((function(t){e.setState({playlists:t})}))}},{key:"getPlaylistInfo",value:function(e){var t=this;Q.getPlaylistInfo(e).then((function(e){t.setState({existingPlaylistInfo:e,tracks:[]})}))}},{key:"clearCurrent",value:function(){this.setState({existingPlaylistInfo:[]})}},{key:"componentDidMount",value:function(){window.addEventListener("load",(function(){Q.getAccessToken()}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{menuToggle:this.state.menuToggle,onclick:this.handleMenuToggle}),r.a.createElement(E,{playlists:this.state.playlists,getPlaylists:this.getPlaylists,getPlaylistInfo:this.getPlaylistInfo,clear:this.clearCurrent,menuToggle:this.state.menuToggle,handleMenuToggle:this.handleMenuToggle}),r.a.createElement("main",{className:"main-area"},r.a.createElement("section",{className:"playlist-section"},r.a.createElement("div",{className:"container"},r.a.createElement(T,{playlists:this.state.playlists,getPlaylists:this.getPlaylists,getPlaylistInfo:this.getPlaylistInfo,clear:this.clearCurrent})),r.a.createElement("div",{className:"border-right"})),r.a.createElement("section",{className:"searchresults-section"},r.a.createElement("div",{className:"container"},r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/newplaylist"},r.a.createElement(j,{tracks:this.state.tracks,addTrack:this.addTrack,search:this.searchTrack}),r.a.createElement(w,{playlist:this.state.playlistName,playlistTracks:this.state.playlistTracks,handleNameChange:this.handleNameChange,removeTrack:this.removeTrack,savePlaylist:this.savePlaylist,listOfUris:this.state.listOfUris})),r.a.createElement(f.a,{path:"/".concat(this.state.existingPlaylistInfo.name)},r.a.createElement(S,{info:this.state.existingPlaylistInfo,removeTrack:this.removeTrack,savePlaylist:this.savePlaylist,listOfUris:this.state.listOfUris})))))))}}]),a}(s.Component));l.a.render(r.a.createElement(c.a,{basename:"/"},r.a.createElement(U,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.421bce47.chunk.js.map